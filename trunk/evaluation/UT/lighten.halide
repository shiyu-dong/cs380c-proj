#include "Halide.h"
#define RESULT_TYPE int
using namespace Halide;

#include <iostream>

Func make_lighten(Image<int> input, uint8_t amt) {
	Var x,y;
	Func func(x,y);

	func(x,y) = static_cast< uint8_t >(min(static_cast< uint16_t >(input(x,y)+amt), static_cast< uint16_t >(255)));

  func.realize(8,3);
	return func;
}

int main(int argc, char **argv) {
	Var x,y,c;
  Func test(x, y);

	Image<int> input(8, 3);
	uint8_t amt = 50;

	test(x,y) = min(input(x,y) + amt, 255);
  test.root();

	Image<int> out = test.realize(8, 3);
}
